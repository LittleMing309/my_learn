<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>带延时加载的瀑布流</title>
	<style>
		*{ padding: 0; margin:0;}
		li{ list-style: none;}
		#box { width: 960px; margin:0 auto; border: 1px solid red; overflow:hidden;}
		#box ul{ width: 300px; float:left; margin-left:18px; padding: 10px 0;}
		#box li{ background: #CCC; margin-top: 10px; display: none;}
	</style>
	<script>
		window.onload =  function(){
			var oBox = document.getElementById('box');
			var aUl = oBox.getElementsByTagName('ul');
			function create20(){
				for(var i = 0 ; i<20; i++){
					var oLi = document.createElement('li');
					oLi.style.height = Math.random()*(500-100)+100+'px';
					var arr = [];
					var sH = document.documentElement.scrollTop || document.body.scrollTop;
				var cH = document.documentElement.clientHeight;
				if(oLi.offsetTop < sH+cH){
					oLi.style.display = 'block';
				}
					for(var j = 0 ;j<aUl.length; j++){
						arr[j] = aUl[j];
					}
					arr.sort(function(ul1,ul2){
						return ul1.offsetHeight - ul2.offsetHeight;
					});
					arr[0].appendChild(oLi);
				}
			}
			create20();
			 window.onscroll = function(){
				var sH = document.documentElement.scrollTop || document.body.scrollTop;
				var cH = document.documentElement.clientHeight;
				if(oLi.offsetTop < sH+cH){
					oLi.style.display = 'block';
				}
			}
			}
	</script>
</head>
<body>
	<div id="box">
		<ul></ul>
		<ul></ul>
		<ul></ul>
	</div>
</body>
</html>